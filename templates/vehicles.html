<!DOCTYPE html>
<html>
<head>
    <title>Vehicle List</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <a href="{{ url_for('manager_dashboard') }}" class="back-link">‚Üê Return to Dashboard</a>
</head>
<body>
    <h1>Vehicles</h1>
    <a href="{{ url_for('add_vehicle') }}">Add New Vehicle</a><br><br>

    <table border="1">
        <thead>
            <tr>
                <th><a href="{{ url_for('view_vehicles', sort_by='registration', order='desc' if sort_by == 'registration' and order == 'asc' else 'asc') }}">Reg</a></th>
                <th><a href="{{ url_for('view_vehicles', sort_by='make_model', order='desc' if sort_by == 'make_model' and order == 'asc' else 'asc') }}">Make & Model</a></th>
                <th><a href="{{ url_for('view_vehicles', sort_by='plate_number', order='desc' if sort_by == 'plate_number' and order == 'asc' else 'asc') }}">Plate Number</a></th>
                <th><a href="{{ url_for('view_vehicles', sort_by='vehicle_size', order='desc' if sort_by == 'vehicle_size' and order == 'asc' else 'asc') }}">Vehicle Size</a></th>
                <th><a href="{{ url_for('view_vehicles', sort_by='mot_renewal_date', order='desc' if sort_by == 'mot_renewal_date' and order == 'asc' else 'asc') }}">MOT Renewal</a></th>
                <th><a href="{{ url_for('view_vehicles', sort_by='mot_6_monthly_date', order='desc' if sort_by == 'mot_6_monthly_date' and order == 'asc' else 'asc') }}">MOT 6-Monthly</a></th>
                <th><a href="{{ url_for('view_vehicles', sort_by='plate_expiry_date', order='desc' if sort_by == 'plate_expiry_date' and order == 'asc' else 'asc') }}">Plate Expiry</a></th>
                <th><a href="{{ url_for('view_vehicles', sort_by='tax_expiry_date', order='desc' if sort_by == 'tax_expiry_date' and order == 'asc' else 'asc') }}">Tax Expiry</a></th>
                <th><a href="{{ url_for('view_vehicles', sort_by='insured', order='desc' if sort_by == 'insured' and order == 'asc' else 'asc') }}">Insured</a></th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for vehicle in vehicles %}
            <tr>
                <td>{{ vehicle.registration }}</td>
                <td>{{ vehicle.make_model }}</td>
                <td>{{ vehicle.plate_number }}</td>
                <td>{{ vehicle.vehicle_size }}</td>
                <td>{{ vehicle.mot_renewal_date }}</td>
                <td>{{ vehicle.mot_6_monthly_date }}</td>
                <td>{{ vehicle.plate_expiry_date }}</td>
                <td>{{ vehicle.tax_expiry_date }}</td>
                <td>{{ 'Yes' if vehicle.insured else 'No' }}</td>
                <td>
                    <a href="{{ url_for('edit_vehicle', vehicle_id=vehicle.id) }}">Edit</a>
                    <form action="{{ url_for('delete_vehicle', vehicle_id=vehicle.id) }}" method="POST" style="display:inline;">
                        <button type="submit" onclick="return confirm('Are you sure you want to delete this vehicle?')">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
