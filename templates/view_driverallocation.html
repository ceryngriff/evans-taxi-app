    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>View Driver Allocations</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <a href="{{ url_for('manager_dashboard') }}" class="back-link">‚Üê Return to Dashboard</a>
    </head>
    <body>
    <div class="container">
        <h1>View Driver Allocations</h1>

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul class="flashes">
            {% for category, message in messages %}
            <li class="flash {{ category }}">{{ message }}</li>
            {% endfor %}
            </ul>
        {% endif %}
        {% endwith %}

        <!-- üîç Filter Form -->
        <form method="POST" class="filter-form">
            <label for="school_name">School Name:</label>
            <input type="text" name="school_name" id="school_name" placeholder="e.g. Greenfield Primary">

            <label for="driver_id">Driver:</label>
            <select name="driver_id" id="driver_id">
                <option value="">-- Select Driver --</option>
                {% for driver in drivers %}
                    <option value="{{ driver.id }}">{{ driver.name }}</option>
                {% endfor %}
            </select>

            <label for="contract_date">Contract Date:</label>
            <input type="date" name="contract_date" id="contract_date">

            <label for="driver_shift">Shift:</label>
            <select name="driver_shift" id="driver_shift">
                <option value="">-- Select Shift --</option>
                <option value="AM">AM</option>
                <option value="PM">PM</option>
                <option value="Both">Both</option>
            </select>

            <button type="submit">Filter</button>
        </form>

        <hr>

        <!-- üìã Allocation Table -->
        <table>
            <thead>
                <tr>
                    <th>Contract #</th>
                    <th>School</th>
                    <th>Driver</th>
                    <th>Escort</th>
                    <th>Shift</th>
                    <th>Date</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for alloc in contracts %}
                    <tr>
                        <td>{{ alloc.contract.contract_number }}</td>
                        <td>{{ alloc.contract.school_name }}</td>
                        <td>{{ alloc.driver.name if alloc.driver else '‚Äî' }}</td>
                        <td>{{ alloc.escort.name if alloc.escort else '‚Äî' }}</td>
                        <td>{{ alloc.driver_shift }}</td>
                        <td>{{ alloc.contract_date or "‚Äî" }}</td>
                        <td>
                            <!-- ‚úèÔ∏è Edit -->
                            <a href="{{ url_for('edit_driverallocation', allocation_id=alloc.id) }}">‚úèÔ∏è Edit</a>

                            <form method="POST"
        action="{{ url_for('delete_driverallocation', allocation_id=alloc.id) }}"
        style="display:inline;"
        onsubmit="return confirm('Are you sure you want to delete this allocation?');">
        <button type="submit" style="background:none; border:none; color:red; cursor:pointer;">
            üóëÔ∏è Delete
        </button>
    </form>

                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="7">No allocations found.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    </body>
    </html>
